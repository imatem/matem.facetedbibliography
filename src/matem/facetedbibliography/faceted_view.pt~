<html
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      
      >

<head>

<metal:block fill-slot="top_slot">
        <tal:insert tal:replace="nothing" tal:define="dummy python:request.set('disable_border', True)" />
</metal:block>

<metal:jsslot fill-slot="javascript_head_slot">

<script type="text/javascript">
(function($){

   $(document).ready(function(){
        var i;
        var checkboxes = document.querySelectorAll('input[type=checkbox]');
        var checkboxes_c = document.getElementsByClassName('cit');
        var checkboxes_r = document.getElementsByClassName('ref');
        
        for (i=0; i<checkboxes.length;i++){
                checkboxes[i].checked = sessionStorage.getItem(checkboxes[i].value) == 'true'?true:false;
        }
       
        
        $('input').change(function(){
                var cad= $(this).val();
                sessionStorage.setItem($(this).val(),$(this).is(':checked'));
                //indexOf returns the position of the str in the other str. If not found,return -1:
                if (cad.indexOf("+c")==-1 && cad.indexOf("+r")==-1){
                        var str="";
                        for (i=0;i<checkboxes_c.length; i++)
                        {
                        $(checkboxes_c[i]).prop('checked',false);
                        }
                        for (i=0;i<checkboxes_r.length; i++)
                        {
                        $(checkboxes_r[i]).prop('checked',false);
                        }

                }
                for (i=0; i<checkboxes.length;i++){
                sessionStorage.setItem($(checkboxes[i]).val(),$(checkboxes[i]).is(':checked'))
                }       
        });
        $('button').click(function(){
                sessionStorage.clear();
                for (i=0; i<checkboxes.length;i++){
                checkboxes[i].checked = false;
                }
                $('form').submit();
        });
        
        $('#tabs').tab();    
    
   
   });
    
})(jQuery);
</script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

</metal:jsslot>

</head>
<body>

<metal:main fill-slot="main">
<div tal:define="global year view/show_years"/>
<div tal:define="global author view/show_authors"/>
<div tal:define="global collaborator view/show_collaborators"/>
<div tal:define="global journal view/show_journals"/>
<div tal:define="global type view/show_types"/>
<div tal:define="global publication view/show_pub"/>

<div tal:define="global year_cit view/show_years_cit"/>
<div tal:define="global author_cit view/show_authors_cit"/>
<div tal:define="global collaborator_cit view/show_collaborators_cit"/>
<div tal:define="global journal_cit view/show_journals_cit"/>
<div tal:define="global type_cit view/show_types_cit"/>
<div tal:define="global publication_cit view/show_pub_cit"/>

<div tal:define="global year_ref view/show_years_ref"/>
<div tal:define="global author_ref view/show_authors_ref"/>
<div tal:define="global collaborator_ref view/show_collaborators_ref"/>
<div tal:define="global journal_ref view/show_journals_ref"/>
<div tal:define="global type_ref view/show_types_ref"/>
<div tal:define="global publication_ref view/show_pub_ref"/>

<!--  ###################################################### -->


<div tal:define="global list_input view/show_list_input"/>
<legend class='indice' >
Indice <i>h</i>: 
<span tal:content="view/indice_h"> indice h </span>
</legend>

<legend class='indice'>
Indice <i>i10</i>:  
<span tal:content="view/indice_i10"> indice i10 </span>
</legend>

<!--  ###################################################### -->

<button name="clear">Limpiar entradas</button>

<!--  ###################################################### -->
<!--
<table border='0' >
<tr tal:repeat="a python:list_input">
<td >
Entrada: 
<span tal:replace="string:$a">this </span>
</td>
</tr>
</table>
-->
<!--##################################################################-->
<form >

<div class="container"> 
<div id="content" >

    <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
        <li class="active"><a href="#main" data-toggle="tab">Publications</a></li>
        <li><a href="#citation" data-toggle="tab">Citations</a></li>
        <li><a href="#reference" data-toggle="tab">References</a></li>
    </ul>
    
    <div id="my-tab-content" class="tab-content">
        <div class="tab-pane active" id="main">
            <h1>Publications</h1>
<!--  ########################################################################################## -->

        <div>
        <h4>Years</h4>
        <div class='years' style="width: 200px; height: 100px; overflow-y: auto">
                <ul  data-role="listview">
                <div clas='years'  tal:repeat="x python:year" tal:omit-tag="">
                <li>
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"  onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
        </div>
        </div>
        
        <div>
        <h4>Authors IMATE</h4>
        <div class='authors' style="width: 200px; height: 75px;overflow-y: auto">
                <ul  data-role="listview">
                <div class='authors' tal:repeat="x python:author" tal:omit-tag="">                
                <li>
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
        </div>  
        </div> 
        
        <div> 
        <h4>Collaborators</h4>
        <div class="collaborators" style="width: 200px; height: 100px;overflow-y: auto">
                <ul data-role="listview">
                <div class='collaborators' tal:repeat="x python:collaborator" tal:omit-tag="">
                <li>
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
        </div>
        </div>
        
        <div>
        <h4>Types</h4>
        <div class='types' style="width: 200px; height: 75px; overflow-y: auto">
                <ul data-role="listview">
                <div class='types' tal:repeat="x python:type" tal:omit-tag="">   
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
        </div>
        </div>
        
        <div>
        <h4>Journals</h4> 
        <div class='journals' style="width: 200px; height: 100px;overflow-y: auto">      
                <ul data-role="listview">
                <div class='journals' tal:repeat="x python:journal" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
        </div>           
        </div>               
            <!--*******-->
            <div class='publications'>
            <ul>
            <div  class='pub' tal:repeat="x python:publication" tal:omit-tag="">
            <li>
            <span tal:replace="string:$x">this </span> <br><br>
            </li>
            </div>
            </ul>
            </div>
         
<!--  ########################################################################################## -->
        </div>
        <div class="tab-pane" id="citation">
            <h1>Citations</h1>
<!--  ######################################################################################### -->
            <div class="citations">
                <ul>
                <div class='years' tal:repeat="x python:year_cit" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <ul>
                <div class='authors' tal:repeat="x python:author_cit" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                    
                <ul>
                <div class='collaborators' tal:repeat="x python:collaborator_cit" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <ul>
                <div class='types' tal:repeat="x python:type_cit" tal:omit-tag="">
                <li>
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <ul>
                <div class='journals' tal:repeat="x python:journal_cit" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <div class='publications'>
                <ul>
                <div class='pub' tal:repeat="x python:publication_cit" tal:omit-tag="">
                <li>
                <span tal:replace="string:$x">this </span><br><br>
                </li>
                </div>
                </ul>
                </div>
            </div>
<!--  ######################################################################################### -->
        </div>
        <div class="tab-pane" id="reference">
            <h1>References</h1>
<!--  ######################################################################################### -->
            <div class="references">
                <ul>
                <div class='years' tal:repeat="x python:year_ref" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
               
                <ul>
                <div class='authors' tal:repeat="x python:author_ref" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <ul>
                <div class='collaborators' tal:repeat="x python:collaborator_ref" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <ul>
                <div class='types' tal:repeat="x python:type_ref" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <ul>
                <div class='journals' tal:repeat="x python:journal_ref" tal:omit-tag="">
                <li >
                <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
                <span tal:replace="string:$x">this </span>
                </li>
                </div>
                </ul>
                
                <div class='publications'>
                <ul>
                <div class='pub' tal:repeat="x python:publication_ref" tal:omit-tag="">
                <li>
                <span tal:replace="string:$x">this </span><br><br>
                </li>
                </div>
                </ul>
                </div>
            </div>
<!--  ######################################################################################### -->
        </div>
    </div>
</div>
</div>
</form>
</metal:main>	
</body>
</html>
