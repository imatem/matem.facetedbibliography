<html
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="context/main_template/macros/master"
      
      >

<head>

<metal:jsslot fill-slot="javascript_head_slot">
<script type="text/javascript">
(function($){

   $(document).ready(function(){
        var i;
        var checkboxes = document.querySelectorAll('input[type=checkbox]');
        var checkboxes_c = document.getElementsByClassName('cit');
        var checkboxes_r = document.getElementsByClassName('ref');
        
        for (i=0; i<checkboxes.length;i++){
                checkboxes[i].checked = sessionStorage.getItem(checkboxes[i].value) == 'true'?true:false;
        }
       
        
        $('input').change(function(){
                var cad= $(this).val();
                sessionStorage.setItem($(this).val(),$(this).is(':checked'));
                //indexOf returns the position of the str in the other str. If not found,return -1:
                if (cad.indexOf("+c")==-1 && cad.indexOf("+r")==-1){
                        var str="";
                        for (i=0;i<checkboxes_c.length; i++)
                        {
                        $(checkboxes_c[i]).prop('checked',false);
                        }
                        for (i=0;i<checkboxes_r.length; i++)
                        {
                        $(checkboxes_r[i]).prop('checked',false);
                        }

                }
                for (i=0; i<checkboxes.length;i++){
                sessionStorage.setItem($(checkboxes[i]).val(),$(checkboxes[i]).is(':checked'))
                }       

                
        });
        $('button').click(function(){
                sessionStorage.clear();
                for (i=0; i<checkboxes.length;i++){
                checkboxes[i].checked = false;
                }
                $('form').submit();
        });
            
    });

})(jQuery);
</script>
</metal:jsslot>
</head>
<body>

<metal:main fill-slot="main">

<div tal:define="global year view/show_years"/>
<div tal:define="global author view/show_authors"/>
<div tal:define="global collaborator view/show_collaborators"/>
<div tal:define="global journal view/show_journals"/>
<div tal:define="global type view/show_types"/>
<div tal:define="global publication view/show_pub"/>

<div tal:define="global year_cit view/show_years_cit"/>
<div tal:define="global author_cit view/show_authors_cit"/>
<div tal:define="global collaborator_cit view/show_collaborators_cit"/>
<div tal:define="global journal_cit view/show_journals_cit"/>
<div tal:define="global type_cit view/show_types_cit"/>
<div tal:define="global publication_cit view/show_pub_cit"/>

<div tal:define="global year_ref view/show_years_ref"/>
<div tal:define="global author_ref view/show_authors_ref"/>
<div tal:define="global collaborator_ref view/show_collaborators_ref"/>
<div tal:define="global journal_ref view/show_journals_ref"/>
<div tal:define="global type_ref view/show_types_ref"/>
<div tal:define="global publication_ref view/show_pub_ref"/>

<div tal:define="global list_input view/show_list_input"/>
<h3 >
Indice <i>h</i>: 
<span tal:content="view/indice_h"> indice h </span>
</h3>

<h4>
Indice <i>i10</i>:  
<span tal:content="view/indice_i10"> indice i10 </span>
</h4>

<!--  ###################################################### -->

<form >

<button name="clear">Limpiar entradas</button>
<table border="1">
<tr tal:repeat="a python:list_input">
<td >
Entrada: 
<span tal:replace="string:$a">this </span>
</td>
</tr>
</table>

<!--  ############################################################################ -->
<div class="main">
        <table border="1">
        <caption >Years </caption>
        <tr tal:repeat="x python:year">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"  onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>


        <table border="1">
        <tr tal:repeat="x python:author">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:collaborator">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:type">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:journal">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x;"   onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:publication">
        <td>
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>
</div>
<!--  ############################################################################ -->
<div class="citations">
        <table border="1">
        <caption>Year: citations </caption>
        <tr tal:repeat="x python:year_cit">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:author_cit">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:collaborator_cit">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:type_cit">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:journal_cit">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+c;" class="cit" onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:publication_cit">
        <td>
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>
</div>
<!--  ############################################################################# -->
<div class="references">
        <table border="1">
        <caption>Year: References </caption>
        <tr tal:repeat="x python:year_ref">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:author_ref">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:collaborator_ref">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:type_ref">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:journal_ref">
        <td >
        <input type="checkbox" name="faceta:list" tal:attributes="value string:$x+r;" class='ref' onclick="this.form.submit();">
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>

        <table border="1">
        <tr tal:repeat="x python:publication_ref">
        <td>
        <span tal:replace="string:$x">this </span>
        </td>
        </tr>
        </table>
</div>
</form>
</metal:main>	
</body>
</html>
